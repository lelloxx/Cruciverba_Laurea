<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cruciverba di Laurea</title>
<style>
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin: 0; padding: 20px;
  background: #fafafa; color: #111;
}
h1 { text-align: center; margin-bottom: 10px; }
.wrap { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
.grid {
  display: grid;
  grid-template-columns: repeat(13, 38px);
  grid-template-rows: repeat(13, 38px);
  background: #111;
  border: 1px solid #111;
}
.cell {
  width: 38px; height: 38px;
  border: 1px solid #999;
  background: #fff;
  position: relative;
  display: flex; align-items: center; justify-content: center;
}
.cell.black { background: #111; border-color: #111; }
.cell input {
  width: 100%; height: 100%;
  border: none; outline: none;
  text-transform: uppercase;
  text-align: center;
  font-weight: 700; font-size: 16px;
  background: transparent;
}
.cell .num {
  position: absolute;
  top: 2px; left: 3px;
  font-size: 10px; color: #555;
}
button {
  padding: 10px 14px;
  border: 1px solid #333;
  background: #fff;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}
#win { display: none; margin-top: 10px; padding: 10px; border: 1px solid #0a0; color: #0a0; border-radius: 8px; }
#formWrap { display: none; margin-top: 15px; text-align: center; }
#formWrap iframe { width: 100%; max-width: 640px; height: 600px; border: 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

/* feedback */
.correct { background: #e8fbe8 !important; }
.wrong { background: #ffeaea !important; }

/* âœ… MOBILE FIX */
@media (max-width: 880px){
  body { padding: 16px; }
  .wrap { flex-direction: column; align-items: center; }
  .grid {
    grid-template-columns: repeat(13, min(8.5vw, 36px));
    grid-template-rows: repeat(13, min(8.5vw, 36px));
  }
  #formWrap iframe { height: 72vh; }
}
</style>
</head>
<body>

<h1>Cruciverba di Laurea ðŸŽ“</h1>
<div class="wrap">
  <div id="grid" class="grid"></div>
</div>

<div style="text-align:center; margin-top:20px;">
  <button id="check">Verifica risposte</button>
  <div id="win">Complimenti! Hai completato il cruciverba! ðŸŽ‰</div>
</div>

<!-- box che apparirÃ  alla fine -->
<div id="formWrap">
  <p>Ora puoi inserire lâ€™IBAN qui ðŸ‘‡</p>
  <iframe id="gform" loading="lazy"></iframe>
</div>

<script>
// ==========================================
// CONFIG
// ==========================================
const GOOGLE_FORM_LINK = ""; // <-- Inserisci qui il link del tuo Google Form

// griglia e parole (mantieni i tuoi dati)
const SIZE = 13;
const grid = document.getElementById("grid");
const checkBtn = document.getElementById("check");

// esempio (sostituisci con la tua griglia se diversa)
const ANSWERS = {
  "0,1":"M","0,2":"I","0,3":"C","0,4":"H","0,5":"E","0,6":"L","0,7":"E",
  "2,0":"S","2,1":"O","2,2":"F","2,3":"I","2,4":"A",
  "6,1":"I","6,2":"T","6,3":"A","6,4":"L","6,5":"I","6,6":"A","6,7":"N","6,8":"O",
  "8,2":"A","8,3":"N","8,4":"D","8,5":"R","8,6":"E","8,7":"A",
  // verticali
  "0,3":"C","1,3":"H","2,3":"I","3,3":"A","4,3":"R","5,3":"A",
  "1,0":"O","2,0":"S","3,0":"L","4,0":"O",
  "0,8":"E","1,8":"D","2,8":"O","3,8":"A","4,8":"R","5,8":"D","6,8":"O",
  "1,9":"B","2,9":"A","3,9":"R","4,9":"O","5,9":"N","6,9":"E"
};

// celle nere (coerenza grafica)
const BLACKS = [
  "0,0","0,8","0,9","0,10","1,1","1,2","1,4","1,5","1,6","1,7","1,10",
  "2,5","2,6","2,7","2,10","3,1","3,2","3,4","3,5","3,6","3,7","3,10",
  "4,1","4,2","4,4","4,5","4,6","4,7","4,10","5,0","5,1","5,2","5,4",
  "5,5","5,6","5,7","5,10","6,0","6,9","6,10","7,0","7,1","7,2","7,3","7,4","7,5","7,6","7,7","7,8","7,9","7,10",
  "8,0","8,1","8,8","8,9","8,10","9,0","9,1","9,2","9,3","9,4","9,5","9,6","9,7","9,8","9,9","9,10",
  "10,0","10,1","10,2","10,3","10,4","10,5","10,6","10,7","10,8","10,9","10,10"
];

// numeri (se vuoi aggiungere)
const NUMS = {"0,1":1,"2,0":4,"6,1":7,"8,2":8,"0,3":2,"1,0":3,"0,8":5,"1,9":6};

// ==========================================
// COSTRUZIONE GRIGLIA
// ==========================================
for(let r=0;r<SIZE;r++){
  for(let c=0;c<SIZE;c++){
    const key = `${r},${c}`;
    const cell = document.createElement("div");
    cell.className = BLACKS.includes(key) ? "cell black" : "cell";
    if(!BLACKS.includes(key)){
      const inp = document.createElement("input");
      inp.maxLength = 1;
      inp.autocapitalize = "characters";
      inp.inputMode = "text";
      cell.appendChild(inp);
    }
    if(NUMS[key]){
      const num = document.createElement("div");
      num.className = "num";
      num.textContent = NUMS[key];
      cell.appendChild(num);
    }
    grid.appendChild(cell);
  }
}

// ==========================================
// CHECK RISPOSTE
// ==========================================
function checkAll(){
  let correct = true;
  document.querySelectorAll('.cell').forEach((cell,idx)=>{
    const inp = cell.querySelector('input');
    if(!inp) return;
    const r = Math.floor(idx/SIZE);
    const c = idx%SIZE;
    const key = `${r},${c}`;
    const val = (inp.value||"").toUpperCase();
    const sol = ANSWERS[key]||"";
    cell.classList.remove("correct","wrong");
    if(val){
      if(val===sol) cell.classList.add("correct");
      else { cell.classList.add("wrong"); correct=false; setTimeout(()=>{inp.value=""; cell.classList.remove("wrong","correct");},800); }
    } else correct=false;
  });
  if(correct) onSolved();
}

// ==========================================
// ON SOLVED
// ==========================================
function onSolved(){
  document.getElementById('win').style.display='block';
  if(GOOGLE_FORM_LINK){
    const frame = document.getElementById('gform');
    frame.src = GOOGLE_FORM_LINK;
    const box = document.getElementById('formWrap');
    box.style.display='block';
    // ðŸ‘‡ scroll automatico al form (mobile-friendly)
    setTimeout(()=> box.scrollIntoView({behavior:'smooth', block:'start'}), 100);
  }
}

// ==========================================
checkBtn.addEventListener("click", checkAll);
</script>
</body>
</html>
